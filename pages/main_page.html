<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DoneIt</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/styles/main_style.css">
</head>

<body class="bg-body">
    <nav class="navbar bg-secondary fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand text-dark fw-bold fs-1"
                style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif" href="#"
                onclick="location.reload();">
                <i class="bi bi-check2-square"></i>DoneIt</a>
            <form class="d-flex" role="search">
                <input id="searchField" class="form-control me-2" type="search" placeholder="Search task...">
                <div class="dropdown me-2">
                    <button class="btn btn-dark dropdown-toggle" data-bs-toggle="dropdown">Filter</button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item active" href="#" data-filter="all">All</a></li>
                        <li><a class="dropdown-item" href="#" data-filter="pending">Pending</a></li>
                        <li><a class="dropdown-item" href="#" data-filter="completed">Completed</a></li>
                    </ul>
                </div>
                <button id="signOutButton" class="btn btn-dark" style="white-space: nowrap;">
                    <i class="bi bi-box-arrow-left"></i> logout
                </button>
            </form>
        </div>
    </nav>

    <section class="container mt-5 pt-5">
        <header>
            <p class="display-3 fst-italic text-dark text-center">"Plan it, Track it, DoneIt!"</p>
        </header>

        <hr class="mt-5">

        <!-- <section class="mb-5">
            <h4><span id="welcomeSection" class="badge text-bg-secondary">Welcome Yousef!</span></h4>
        </section> -->

        <section class="mb-5 text-end">
            <h4><span id="dateTimeSection" class="badge text-bg-secondary"></span></h4>
        </section>

        <script>
            function updateDateTime() {
                const now = new Date();
                const formattedDateTime = now.toLocaleString();
                document.getElementById('dateTimeSection').textContent = formattedDateTime;
            }

            setInterval(updateDateTime, 1000);
            updateDateTime();
        </script>

        <section>
            <input type="hidden" id="taskID">
            <div class="form-group row">
                <label for="tTitle" class="col-sm-2 col-form-label">Task title:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="tTitle" placeholder="Enter Task Title">
                </div>
            </div>
            <br>
            <div class="form-group row">
                <label for="tDiscreption" class="col-sm-2 col-form-label">Task discreption:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="tDiscreption" placeholder="Enter Task Discreption">
                </div>
            </div>
            <br>
            <div class="col-sm-10 offset-sm-2">
                <button class="btn btn-primary" id="saveButton">Add Task</button>
            </div>
        </section>

        <main id="importingCards" class="row g-4 my-5"></main>
    </section>

    <script type="module">
        import { signOut, addTask, getTasks, deleteTask, editTask, toggleTaskStatus, search, filter } from "/scripts/main_script.js";

        document.getElementById("saveButton").addEventListener("click", addTask);

        window.toggleTaskStatus = toggleTaskStatus;
        window.deleteTask = deleteTask;
        window.editTask = editTask;
        getTasks('all');
        search();
        filter();
        signOut();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>